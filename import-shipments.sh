#!/bin/bash

echo "๐ ุจุฏุก ุนูููุฉ ุงุณุชูุฑุงุฏ ุงูุดุญูุงุช ูู ููู CSV"
echo "=========================================="

# ุงูุชุญูู ูู ูุฌูุฏ ููู CSV
if [ ! -f "shipment-export-1755098092.csv" ]; then
    echo "โ ุฎุทุฃ: ููู CSV ุบูุฑ ููุฌูุฏ"
    echo "   ูุฑุฌู ุงูุชุฃูุฏ ูู ูุฌูุฏ ุงูููู: shipment-export-1755098092.csv"
    exit 1
fi

echo "โ ุชู ุงูุนุซูุฑ ุนูู ููู CSV"

# ุชุญุถูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช
echo ""
echo "๐ง ุงูุฎุทูุฉ 1: ุชุญุถูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช..."
yarn db:prepare-import

if [ $? -ne 0 ]; then
    echo "โ ูุดู ูู ุชุญุถูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช"
    exit 1
fi

# ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช
echo ""
echo "๐ฆ ุงูุฎุทูุฉ 2: ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช..."
yarn db:import-csv

if [ $? -ne 0 ]; then
    echo "โ ูุดู ูู ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช"
    exit 1
fi

echo ""
echo "๐ ุชู ุงูุงูุชูุงุก ูู ุนูููุฉ ุงูุงุณุชูุฑุงุฏ ุจูุฌุงุญ!"
echo "๐ ููููู ูุฑุงุฌุนุฉ ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู: yarn db:studio"
